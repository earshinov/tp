class Model {
	constructor() {
		this.records = {}; // recordNo => Record
		this.objects = []; // : Obj
		this.sqlModel = new SqlModel();
	}
	loadCsv(csv) {
		var me = this;

		var reader = new CsvReader();
		reader.read(csv, function(ex) {
			if (ex)
				throw ex;
			var data = reader.getData();
			var temp = {
				records: me.records,
				objects: me.objects,
			};
			try {
				me.records = data.records;
				me.objects = data.objects;
				me.sqlModel.init(me);
			}
			catch (ex) {
				me.records = temp.records;
				me.objects = temp.objects;
				throw ex;
			}
		});
	}
}

module.exports = Model;

var SqlModel = require("app/model/SqlModel");
var CsvReader = require("app/CsvReader");
